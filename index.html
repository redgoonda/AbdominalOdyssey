<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>Abdominal Odyssey</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0a0a12;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      font-family: 'Press Start 2P', monospace;
      overflow: hidden;
    }

    #game-container {
      position: relative;
      border: 2px solid #00e5ff44;
      box-shadow: 0 0 40px rgba(0, 229, 255, 0.15), 0 0 80px rgba(0, 229, 255, 0.05);
      width: 100%;
      max-width: 960px;
    }

    #game-container canvas {
      display: block;
      width: 100% !important;
      height: auto !important;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }

    #title-bar {
      width: 100%;
      max-width: 960px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 6px 12px;
      background: #0d1b2a;
      border: 1px solid #00e5ff22;
      border-bottom: none;
    }

    #title-bar .game-title {
      font-size: 10px;
      color: #00e5ff;
      letter-spacing: 2px;
    }

    #title-bar .admin-link a {
      font-size: 8px;
      color: #667788;
      text-decoration: none;
    }
    #title-bar .admin-link a:hover { color: #aabbcc; }

    #loading-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: #0a0a12;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 500;
      font-family: 'Press Start 2P', monospace;
      color: #00e5ff;
      font-size: 12px;
      flex-direction: column;
      gap: 16px;
    }

    #loading-overlay .loading-bar-bg {
      width: 300px;
      height: 8px;
      background: #1a2a3a;
      border: 1px solid #00e5ff44;
    }

    #loading-bar {
      height: 100%;
      background: #00e5ff;
      width: 0%;
      transition: width 0.3s;
    }

    #loading-overlay.hidden { display: none; }
  </style>
</head>
<body>

<div id="title-bar">
  <span class="game-title">⚕ ABDOMINAL ODYSSEY</span>
  <span class="admin-link"><a href="/admin" target="_blank">[ Q&amp;A Admin Panel ]</a></span>
</div>

<div id="game-container">
  <div id="loading-overlay">
    <div>LOADING...</div>
    <div class="loading-bar-bg"><div id="loading-bar"></div></div>
    <div style="font-size:7px;color:#445566;margin-top:8px">Abdominal Imaging Reading Room · UH Cleveland</div>
  </div>
</div>

<!-- Phaser 3 -->
<script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>

<!-- Game modules (order matters) -->
<script src="/js/GameState.js"></script>
<script src="/js/sprites.js"></script>
<script src="/js/dialog.js"></script>

<!-- Scenes -->
<script src="/js/scenes/BootScene.js"></script>
<script src="/js/scenes/CharacterCreatorScene.js"></script>
<script src="/js/scenes/CorridorScene.js"></script>
<script src="/js/scenes/MiniBossScene.js"></script>
<script src="/js/scenes/FinalBossScene.js"></script>
<script src="/js/scenes/GameOverScene.js"></script>

<!-- Touch controls (mobile) -->
<script src="/js/touch.js"></script>

<!-- Main -->
<script src="/js/main.js"></script>

<script>
  // Fake loading bar
  let progress = 0;
  const bar = document.getElementById('loading-bar');
  const interval = setInterval(() => {
    progress = Math.min(progress + Math.random() * 15, 90);
    bar.style.width = progress + '%';
  }, 150);

  window.addEventListener('load', () => {
    clearInterval(interval);
    bar.style.width = '100%';
    setTimeout(() => {
      document.getElementById('loading-overlay').classList.add('hidden');
    }, 400);
  });
</script>

</body>
</html>
